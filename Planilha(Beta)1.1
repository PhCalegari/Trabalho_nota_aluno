<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Registro de Notas dos Alunos</title>
  <style>
    body {
      font-family: Arial, sans-serif;
    }

    input, button {
      margin-bottom: 10px;
    }

    #notas {
      margin-top: 20px;
    }

    #lista-alunos {
      border-collapse: collapse;
      width: 100%;
    }

    #lista-alunos th, #lista-alunos td {
      border: 1px solid #ddd;
      padding: 8px;
      text-align: left;
    }

    #lista-alunos th {
      background-color: #f2f2f2;
    }

    .aluno {
      margin-bottom: 10px;
    }

    .aluno input {
      margin-right: 10px;
    }

    .notas-container {
      display: none;
    }

    .media {
      font-weight: bold;
    }

    .aprovado {
      background-color: lightgreen;
    }

    .recuperacao {
      background-color: yellow;
    }

    .reprovado {
      background-color: lightcoral;
    }
  </style>
</head>
<body>
  <h1>Registro de Notas dos Alunos</h1>
  <div id="alunos">
    <input type="text" id="nome" placeholder="Nome do aluno">
    <input type="text" id="ra" placeholder="RA do aluno">
    <input type="email" id="email" placeholder="E-mail do aluno">
    <button onclick="adicionarAluno()">Adicionar Aluno</button>
  </div>
  <div id="notas">
    <h2>Notas</h2>
    <div class="notas-container">
      <label>Primeiro Bimestre:</label>
      <input type="number" id="prova_1" placeholder="Nota da prova (até 8)">
      <input type="number" id="prova_integrada_1" placeholder="Nota da prova integrada (até 1)">
      <input type="number" id="aep_1" placeholder="Nota da AEP (até 1)">
    </div>
    <div class="notas-container">
      <label>Segundo Bimestre:</label>
      <input type="number" id="prova_2" placeholder="Nota da prova (até 8)">
      <input type="number" id="prova_integrada_2" placeholder="Nota da prova integrada (até 1)">
      <input type="number" id="aep_2" placeholder="Nota da AEP (até 1)">
    </div>
    <table id="lista-alunos">
      <thead>
        <tr>
          <th>Nome</th>
          <th>RA</th>
          <th>E-mail</th>
          <th>Prova 1</th>
          <th>Prova Integrada 1</th>
          <th>AEP 1</th>
          <th>Prova 2</th>
          <th>Prova Integrada 2</th>
          <th>AEP 2</th>
          <th>Média Bimestre 1</th>
          <th>Média Bimestre 2</th>
          <th>Média Semestral</th>
          <th>Status</th>
          <th>Ações</th>
        </tr>
      </thead>
      <tbody>
      </tbody>
    </table>
    <button onclick="calcularNotas()">Calcular Notas</button>
  </div>
  <script>
    // Função para adicionar um novo aluno
    function adicionarAluno() {
      let nome = document.getElementById("nome").value;
      let ra = document.getElementById("ra").value;
      let email = document.getElementById("email").value;
      let prova1 = document.getElementById("prova_1").value;
      let provaIntegrada1 = document.getElementById("prova_integrada_1").value;
      let aep1 = document.getElementById("aep_1").value;
      let prova2 = document.getElementById("prova_2").value;
      let provaIntegrada2 = document.getElementById("prova_integrada_2").value;
      let aep2 = document.getElementById("aep_2").value;

      // Cria o objeto aluno com as notas de ambos os bimestres
      let aluno = {
        nome: nome,
        ra: ra,
        email: email,
        notas: {
          1: {
            prova: prova1,
            prova_integrada: provaIntegrada1,
            aep: aep1
          },
          2: {
            prova: prova2,
            prova_integrada: provaIntegrada2,
            aep: aep2
          }
        }
      };

      let tabelaAlunos = document.getElementById("lista-alunos").getElementsByTagName('tbody')[0];
      let newRow = tabelaAlunos.insertRow(tabelaAlunos.rows.length);

      let cellNome = newRow.insertCell(0);
      cellNome.innerHTML = nome;

      let cellRA = newRow.insertCell(1);
      cellRA.innerHTML = ra;

      let cellEmail = newRow.insertCell(2);
      cellEmail.innerHTML = email;

      let cellProva1 = newRow.insertCell(3);
      cellProva1.innerHTML = prova1;

      let cellProvaIntegrada1 = newRow.insertCell(4);
      cellProvaIntegrada1.innerHTML = provaIntegrada1;

      let cellAep1 = newRow.insertCell(5);
      cellAep1.innerHTML = aep1;

      let cellProva2 = newRow.insertCell(6);
      cellProva2.innerHTML = prova2;

      let cellProvaIntegrada2 = newRow.insertCell(7);
      cellProvaIntegrada2.innerHTML = provaIntegrada2;

      let cellAep2 = newRow.insertCell(8);
      cellAep2.innerHTML = aep2;

      let cellMediaBimestre1 = newRow.insertCell(9);
      cellMediaBimestre1.innerHTML = "";

      let cellMediaBimestre2 = newRow.insertCell(10);
      cellMediaBimestre2.innerHTML = "";

      let cellMediaSemestral = newRow.insertCell(11);
      cellMediaSemestral.innerHTML = "";

      let cellStatus = newRow.insertCell(12);
      cellStatus.innerHTML = "";

      let cellAcoes = newRow.insertCell(13);
      cellAcoes.innerHTML = '<button onclick="editarAluno(this)">Editar</button><button onclick="excluirAluno(this)">Excluir</button>';
    }

    // Função para editar as informações de um aluno
    function editarAluno(btn) {
      let row = btn.parentNode.parentNode;
      let cells = row.cells;

      // Se as células estiverem editáveis, torna-as não editáveis
      if (cells[3].contentEditable === "true") {
        for (let i = 3; i <= 8; i++) {
          cells[i].contentEditable = false;
        }
        btn.innerText = "Editar";
      } else { // Caso contrário, torna-as editáveis
        for (let i = 3; i <= 8; i++) {
          cells[i].contentEditable = true;
        }
        btn.innerText = "Salvar";
      }
    }

    // Função para excluir um aluno
    function excluirAluno(btn) {
      let confirma = confirm("Tem certeza que deseja excluir este aluno?");
      if (confirma) {
        let row = btn.parentNode.parentNode;
        row.parentNode.removeChild(row);
      }
    }

    // Função para calcular as notas e atualizar o status de aprovação
    function calcularNotas() {
      let tabelaAlunos = document.getElementById("lista-alunos").getElementsByTagName('tbody')[0];
      let rows = tabelaAlunos.rows;

      for (let i = 0; i < rows.length; i++) {
        let cells = rows[i].cells;

        let mediaBimestre1 = (parseFloat(cells[3].innerHTML) + parseFloat(cells[4].innerHTML) + parseFloat(cells[5].innerHTML)) / 3;
        let mediaBimestre2 = (parseFloat(cells[6].innerHTML) + parseFloat(cells[7].innerHTML) + parseFloat(cells[8].innerHTML)) / 3;

        cells[9].innerHTML = mediaBimestre1.toFixed(2);
        cells[10].innerHTML = mediaBimestre2.toFixed(2);
        cells[11].innerHTML = ((mediaBimestre1 + mediaBimestre2) / 2).toFixed(2);

        let mediaSemestral = parseFloat(cells[11].innerHTML);

        // Determinar o status de aprovação com base na média semestral
        if (mediaSemestral >= 6) {
          cells[12].innerHTML = "Aprovado";
          cells[12].className = "aprovado";
        } else if (mediaSemestral >= 3) {
          cells[12].innerHTML = "Recuperação";
          cells[12].className = "recuperacao";
        } else {
          cells[12].innerHTML = "Reprovado";
          cells[12].className = "reprovado";
        }
      }
    }
  </script>
</body>
</html>
